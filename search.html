<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./imgs/logo.svg" type="image/image/svg+xml" />
    <title>BookingRooms</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wdth,wght@0,75..100,300..800;1,75..100,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style type="text/tailwindcss">
      @theme {
        --color-primary: #2464ec;
        --color-secondary: #e1e7ff;
        --color-mainBg: #f0f3f8;
        --font-poppins: "Poppins", "sans-serif";
        --font-openSans: "Open Sans", "sans-serif";
      }
      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      /* Ẩn spinner trên Firefox */
      input[type="number"] {
        -moz-appearance: textfield;
      }
    </style>
    <!-- Dùng để load component header và footer -->
    <script src="./js/layout.js"></script>
  </head>
  <body>
    <!-- Phần container cho header -->
    <div id="header-container"></div>

    <!-- phần container cho content -->
    <main class="max-h-auto p-5 bg-mainBg">
      <!-- Tìm kiếm -->
      <section
        class="bg-secondary max-w-full sm:max-w-2xl lg:max-w-4xl xl:max-w-5xl 2xl:max-w-4xl mx-auto my-5 min-h-[300px] sm:min-h-[250px] md:min-h-[260px] lg:min-h-[280px] 2xl:min-h-[320px] flex justify-center items-center rounded-lg p-4"
      >
        <div
          class="bg-primary rounded-lg p-4 sm:p-6 text-center w-full max-w-full sm:max-w-xl lg:max-w-3xl 2xl:max-w-3xl mx-auto"
        >
          <h3
            class="text-white text-xl sm:text-2xl md:text-3xl font-bold mb-4 sm:mb-6"
          >
            Bạn muốn đi đâu ?
          </h3>

          <div
            class="bg-white flex flex-col gap-4 sm:gap-5 justify-center items-center p-3 sm:p-4 rounded-lg"
          >
            <!-- Row 1: Location input and Person counter -->
            <div class="flex flex-col sm:flex-row gap-3 sm:gap-5 w-full">
              <!-- Location Input -->
              <input
                type="text"
                id="searchLocation"
                placeholder="Bạn muốn đi đâu ?..."
                class="bg-[#F2F6F9] w-full sm:flex-1 h-[45px] sm:h-[50px] lg:h-[55px] 2xl:h-[60px] rounded-lg px-4 sm:px-5 font-openSans font-semibold text-sm sm:text-base lg:text-lg 2xl:text-xl"
              />

              <!-- Person Counter -->
              <div
                class="flex flex-row gap-2 bg-[#F2F6F9] justify-between rounded-lg pl-3 pr-2 min-w-fit"
              >
                <label
                  class="flex items-center justify-center font-bold font-openSans text-sm sm:text-base lg:text-lg 2xl:text-xl whitespace-nowrap"
                >
                  Người
                </label>
                <div
                  class="flex flex-row items-center gap-1 justify-center border border-gray-300 rounded-sm"
                >
                  <!-- Decrease button -->
                  <button
                    onclick="handleDecrement()"
                    class="w-[35px] h-[35px] sm:w-[40px] sm:h-[40px] lg:w-[45px] lg:h-[45px] 2xl:w-[50px] 2xl:h-[50px] cursor-pointer flex items-center justify-center hover:bg-gray-100 transition-colors"
                  >
                    <i class="fa-solid fa-minus text-xs sm:text-sm"></i>
                  </button>

                  <input
                    readonly
                    id="inputQtyPerson"
                    value="1"
                    type="number"
                    placeholder="1"
                    min="0"
                    class="w-[40px] h-[35px] sm:h-[40px] lg:h-[45px] 2xl:h-[50px] px-1 font-openSans font-semibold text-black focus:outline-none text-center text-sm sm:text-base"
                  />

                  <!-- Increase button -->
                  <button
                    onclick="handleIncrement()"
                    class="w-[35px] h-[35px] sm:w-[40px] sm:h-[40px] lg:w-[45px] lg:h-[45px] 2xl:w-[50px] 2xl:h-[50px] cursor-pointer flex items-center justify-center hover:bg-gray-100 transition-colors"
                  >
                    <i class="fa-solid fa-plus text-xs sm:text-sm"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- Row 2: Date inputs and Search button -->
            <div class="flex flex-col sm:flex-row gap-3 sm:gap-5 w-full">
              <!-- Check-in Date -->
              <input
                id="InputcheckIn"
                onchange="validateCheckIn()"
                type="date"
                class="bg-[#F2F6F9] w-full sm:w-[140px] md:w-[160px] lg:w-[230px] h-[45px] sm:h-[50px] lg:h-[55px] 2xl:h-[60px] rounded-lg px-3 text-sm sm:text-base lg:text-lg 2xl:text-xl font-openSans font-semibold"
              />

              <!-- Check-out Date -->
              <input
                onchange="validateDateRange()"
                id="InputcheckOut"
                type="date"
                class="bg-[#F2F6F9] w-full sm:w-[140px] md:w-[160px] lg:w-[230px] h-[45px] sm:h-[50px] lg:h-[55px] 2xl:h-[60px] rounded-lg px-3 text-sm sm:text-base lg:text-lg 2xl:text-xl font-openSans font-semibold"
              />

              <!-- Search Button -->
              <button
                onclick="handleSubmit()"
                id="btnSearch"
                class="bg-primary w-full sm:w-[120px] md:w-[140px] lg:w-[200px] h-[45px] sm:h-[50px] lg:h-[55px] 2xl:h-[60px] rounded-lg font-bold font-openSans text-base sm:text-lg lg:text-xl 2xl:text-2xl text-white cursor-pointer hover:bg-primary/90 transition-colors duration-200"
              >
                Tìm kiếm
              </button>
            </div>
          </div>
        </div>
      </section>

      <section class="search-section max-w-7xl mx-auto my-8">
        <div class="search-container flex flex-col md:flex-row gap-6">
          <aside
            class="filter-sidebar max-h-80 w-full md:w-64 bg-white rounded-lg p-4 shadow-sm"
          >
            <h2 class="text-xl font-bold mb-4 flex justify-center">Bộ lọc</h2>
            <div class="filter-group mb-6">
              <h3 class="font-semibold mb-2">Khoảng giá</h3>
              <div class="flex items-center justify-between">
                <div class="min-price flex-1">
                  <input
                    type="text"
                    class="w-full rounded-lg border border-gray-300 py-2 px-3 text-center focus:outline-none focus:ring-1 focus:ring-primary"
                    placeholder="0đ"
                    id="min-price"
                    min="0"
                    max="1000000000"
                  />
                </div>
                <div
                  class="divider-container flex items-center justify-center px-2"
                >
                  <span class="text-gray-400 font-medium">—</span>
                </div>
                <div class="max-price flex-1">
                  <input
                    id="max-price"
                    type="text"
                    class="w-full rounded-lg border border-gray-300 py-2 px-3 text-center focus:outline-none focus:ring-1 focus:ring-primary"
                    placeholder="10,000,000đ"
                    min="0"
                    max="1000000000"
                    aria-label="Giá tối đa"
                  />
                </div>
              </div>
              <div
                class="price-labels flex justify-between text-xs text-gray-500 mt-1 px-1"
              >
                <span>Tối thiểu</span>
                <span>Tối đa</span>
              </div>
            </div>

            <!-- Filter button -->
            <button
              class="w-full bg-primary text-white py-2 rounded-lg font-semibold hover:bg-primary/90 transition-colors"
              onclick="handleSearch()"
            >
              Lọc
            </button>
          </aside>

          <!-- Search results section -->
          <div class="search-results-container flex-1">
            <!-- sắp xếp kết quả -->
            <header
              class="results-header flex justify-between items-center mb-4 pb-3 border-b-1"
            >
              <h2 class="font-bold text-xl" id="resultSearch"></h2>
              <div class="sort-dropdown relative">
                <button
                  id="sortDropdownButton"
                  class="flex items-center justify-between gap-2 bg-white px-3 py-2 w-40 rounded-md border border-gray-300 hover:border-gray-400 transition-colors text-nowrap"
                  onclick="toggleSortDropdown()"
                >
                  <span id="currentSortOption">Sắp xếp</span>
                  <i
                    class="fa-solid fa-chevron-down text-xs transition-transform duration-300"
                    id="sortDropdownIcon"
                  ></i>
                </button>

                <!-- Sort dropdown menu -->
                <div
                  id="sortDropdownMenu"
                  class="absolute right-0 top-full mt-1 w-40 bg-white rounded-md shadow-lg border border-gray-200 hidden z-10"
                >
                  <ul class="py-1">
                    <li>
                      <button
                        class="w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center gap-2"
                        onclick="selectSortOption('price-low-to-high')"
                      >
                        <span>Giá thấp đến cao</span>
                      </button>
                    </li>
                    <li>
                      <button
                        class="w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center gap-2"
                        onclick="selectSortOption('price-high-to-low')"
                      >
                        <span>Giá cao đến thấp</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
            </header>

            <!-- Results list -->
            <ul class="space-y-4" id="list-result">
              <!-- Individual result item -->
            </ul>

            <nav
              id="pagination"
              aria-label="Search results pages"
              class="pagination flex justify-center items-center gap-2 mt-8 py-4"
            >
              <!-- Pagination sẽ được tạo động bởi JavaScript -->
            </nav>
          </div>
        </div>
      </section>
    </main>
    <!-- Phần container cho footer -->
    <div id="footer-container"></div>
    <script type="module" src="./js/ToastNotification.js"></script>
    <script src="./js/index.js"></script>
    <script src="./js/search.js"></script>
  </body>
</html>
